 // Adafruit Motor shield library
// copyright Adafruit Industries LLC, 2009
// this code is public domain, enjoy!

#include <AFMotor.h>

AF_DCMotor backmotor(4);
AF_DCMotor frontmotor(1);

void setup() {
  // initialize serial communications at 9600 bps:
  Serial.begin(9600);
  
  pinMpode(A0, INPUT);
  pinMode(A1, INPUT);
  pinMode(A2, INPUT);
  pinMode(A4, INPUT);


  backmotor.setSpeed(255);
  frontmotor.setSpeed(150);

  int voltCap=0;
  int voltAverage=0;
  
  	
	//get analogReads of each 4 10x
	for (int i=0; i <= 10; i++){
		  voltAverage = voltAverage +analogRead(A0)+analogRead(A1)+analogRead(A2)+analogRead(A4);
		  delay(250);
   } 
   
   //divide total by 40 to get average and add 50
   voltCap=(voltAverage/40)+50;
   
   //show car is ready to go
   backmotor.run(FORWARD);
    delay(250);
   backmotor.run(RELEASE);
   delay(250);
   backmotor.run(BACKWARD);
   delay(250);
   backmotor.run(RELEASE);
   frontmotor.run(RELEASE);
}

void loop() {
  
  Serial.print(voltCap);
//Serial.print("Analog 0 is ");
//Serial.print(analogRead(A0));
//Serial.print("Analog 1 is ");
//Serial.print(analogRead(A1));
//Serial.print("Analog 2 is ");
//Serial.print(analogRead(A2));
//Serial.print("Analog 3 is ");
//Serial.print(analogRead(A4));

  //forward
if (analogRead(A0)>voltCap){
    Serial.print("Forward ");
      backmotor.run(RELEASE);
       delay(10);
      backmotor.run(FORWARD);
 }
  //backward
  else if (analogRead(A1)>voltCap){
    Serial.print("Backward ");
       backmotor.run(RELEASE);
       delay(10);
      backmotor.run(BACKWARD);
  }
  //stop back motor
else{
    backmotor.run(RELEASE);
    delay(10);
 }

  //right
    if (analogRead(A2)>voltCap){
      Serial.print("Right ");
      frontmotor.run(RELEASE);
      delay(10);
     frontmotor.run(FORWARD);
  }
  //left
   else if (analogRead(A4)>voltCap){
    Serial.print("Left ");
    frontmotor.run(RELEASE);
    delay(10);
     frontmotor.run(BACKWARD);
  }
  //stop front motor
  else {
    frontmotor.run(RELEASE);
    delay(10);
  }

}

